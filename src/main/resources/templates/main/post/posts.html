<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>열린마당 미리보기</title>
	<link rel="stylesheet" th:href="@{/css/header.css}">
	<link rel="stylesheet" th:href="@{/css/main/posts.css}">
	<link rel="stylesheet" th:href="@{/css/footer.css}">
	<!-- 필요시 posts.css 등 추가 스타일시트 연결 -->
	<style>

	</style>
</head>

<body>
	<!-- 공통 헤더 (Thymeleaf fragment) -->
	<div th:replace="~{main/header :: headFrag(${user})}"></div>

	<!-- 레이아웃: 좌측 사이드바 + 우측 메인 콘텐츠 -->
	<div class="container">
		<!-- 사이드바 -->
		<div class="sidebar">
			<div class="floor-section">
				<!-- 제목: 기존 '1층'대신 '열린마당'으로 대체 -->
				<div class="floor-label active">열린마당</div>
				<!-- 작성하기 버튼 -->
				<div th:if="${user != null}">
					<button id="writeBtn" type="button" class="menu-button">작성하기</button>
				</div>
				<!-- 네비게이션 메뉴 예시 -->

			</div>
		</div>

		<!-- 메인 콘텐츠 영역: 게시글 목록 -->
		<div class="content">
			<div
				th:replace="~{main/postsTable :: postsTable(posts=${posts}, currentPage=${currentPage}, totalPages=${totalPages}, admin=false, pageType='main', userId='')}">
			</div>
		</div>
	</div>

	<!-- 공통 Footer (Thymeleaf fragment) -->
	<div th:replace="~{main/footer :: footer}"></div>

	<script th:src="@{/js/header.js}"></script>
	<script>
		// "작성하기" 버튼 클릭 시 글 작성 페이지로 리다이렉트
		document.getElementById("writeBtn").addEventListener("click", function () {
			window.location.href = "/main/posts/writePost";
		});
	</script>
</body>

</html>